# Система комментариев для блога

### Инструкция по запуску
1. Склонировать репозиторий
2. Запустить проект с используя конфигурационный файл docker-compose (docker-compose up -d)

### Описание эндпоинтов

### 1. /api/register/ 
Регистрация пользователя

#### Пример POST запроса:
    {
    "username": "User1",
    "password": "qwerty123456789!",
    "email": "user@user.com"
    }

#### Пример ответа:
    {
        "Status": true
    }

### 2. /api/login/
Получаем токен для зарегистрированного пользователя.

#### Пример POST запроса:
    {
    "username": "User1",
    "password": "qwerty123456789!"
    }

#### Пример ответа:
    {
    "Status": true,
    "Token": "c9b0f413e4a469cae0b9334d91734a78060d90ca"
    }

### 3. /api/posts/
POST запрос создает пост. Для создания поста необходимо пройти процедуру авторизации с помощью токена. В заголовках к запросу нужно передать ключ Authorization со значением Token <ваш токен>. 
Например: Authorization: Token c9b0f413e4a469cae0b9334d91734a78060d90ca. 
GET запрос выводит список постов с комментариями.

#### Пример POST запроса:
    {
    "title": "Заголовок поста",
    "text": "Текст поста!"
    }

#### Пример ответа:
    {
        "id": 1,
        "author": 1,
        "title": "Заголовок поста",
        "text": "Текст поста!",
        "comments": []
    }

#### Пример ответа на GET запрос:

    [
        {
            "id": 1,
            "author": 1,
            "title": "Заголовок поста",
            "text": "Текст поста!",
            "comments": [
                {
                    "id": 1,
                    "user": "User",
                    "text": "Комментарий к посту",
                    "post": "Заголовок поста",
                    "parent": null,
                    "children": [
                        {
                            "id": 2,
                            "user": "User",
                            "text": "Комментарий к комментарию",
                            "post": null,
                            "parent": 1,
                            "children": [],
                            "created_at": "2022-04-21T21:00:14.363934Z"
                        }
                    ],
                    "created_at": "2022-04-21T20:59:40.067239Z"
                }
            ]
        }
    ]


### 3. /api/comments/
POST запрос создает комментарий к посту или ответ на комментарий (если указан parent). Для создания комментария также необходимо пройти процедуру авторизации с помощью токена.
GET запрос выводит список комментариев.

#### Пример POST запроса (создание комментария к посту):
    {
    "post": "1",
    "text": "Комментарий к посту"
    }

#### Пример ответа:

    {
        "user": 1,
        "text": "Комментарий к посту",
        "post": 1,
        "parent": null
    }

#### Пример POST запроса (создание ответа на комментарий):
    {
        "text": "Комментарий к комментарию",
        "parent": "1"
    }

 #### Пример ответа:

    {
        "user": 1,
        "text": "Комментарий к комментарию",
        "post": null,
        "parent": 1
    }

### 4. api/swagger/
Swagger.

Имеется коллекция запросов в Postman в файле Comments api.postman_collection.json